{"version":3,"sources":["services/phonebook.js","App.js","index.js"],"names":["baseUrl","phoneBookService","getAll","axios","get","then","response","data","create","newPersonObject","post","deletePerson","id","delete","update","objectWithnewNumber","put","Filter","filter","handleFilter","value","onChange","ErrorMessage","message","changeClass","className","Input","props","text","handleChange","required","PersonForm","onSubmit","addName","newName","handleName","newNumber","handleNumber","type","Persons","showPerson","handleDelete","name","number","onClick","App","useState","persons","setPersons","setnewName","setnewNumber","setFilter","setMessage","setChangeClass","useEffect","person","e","target","event","preventDefault","isPresent","find","window","confirm","updatedObject","newNumberObject","map","setTimeout","catch","currentData","newPerson","date","Date","currentPerson","concat","error","console","log","filtered","toLowerCase","search","length","undefined","newFilteredPerson","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e5e551c6.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl).then((response) => response.data)\r\n}\r\n\r\nconst create = (newPersonObject) => {\r\n  return axios.post(baseUrl, newPersonObject).then((response) => response.data)\r\n}\r\n\r\nconst update = (id, objectWithnewNumber) => {\r\n  return axios\r\n    .put(`${baseUrl}/${id}`, objectWithnewNumber)\r\n    .then((response) => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst phoneBookService = { getAll, create, deletePerson, update }\r\n\r\nexport default phoneBookService\r\n","import React, { useEffect, useState } from 'react'\r\nimport phoneBookService from './services/phonebook'\r\n\r\nconst Filter = ({ filter, handleFilter }) => {\r\n  return (\r\n    <p>\r\n      filter shown with\r\n      <input value={filter} onChange={handleFilter} />\r\n    </p>\r\n  )\r\n}\r\nconst ErrorMessage = ({ message, changeClass }) => {\r\n  return message === null ? null : (\r\n    <div className={`error ${changeClass}`}>{message}</div>\r\n  )\r\n}\r\nconst Input = (props) => {\r\n  return (\r\n    <div>\r\n      {props.text}:{' '}\r\n      <input value={props.value} onChange={props.handleChange} required />\r\n    </div>\r\n  )\r\n}\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.addName}>\r\n      <Input\r\n        text={'name'}\r\n        value={props.newName}\r\n        handleChange={props.handleName}\r\n      />\r\n      <Input\r\n        text={'number'}\r\n        value={props.newNumber}\r\n        handleChange={props.handleNumber}\r\n      />\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst Persons = ({ showPerson, handleDelete }) => (\r\n  <div>\r\n    {showPerson.name} {showPerson.number}\r\n    <button onClick={handleDelete}>delete</button>\r\n  </div>\r\n)\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setnewName] = useState('')\r\n  const [newNumber, setnewNumber] = useState('')\r\n  const [filter, setFilter] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n  const [changeClass, setChangeClass] = useState('success')\r\n  useEffect(() => {\r\n    phoneBookService.getAll().then((person) => setPersons(person))\r\n  }, [])\r\n  const handleFilter = (e) => {\r\n    setFilter(e.target.value)\r\n  }\r\n  const newFilteredPerson = () => {\r\n    if (filter !== '') {\r\n      let filtered = persons.filter(\r\n        (person) =>\r\n          person.name.toLowerCase().search(filter.toLowerCase()) !== -1\r\n      )\r\n      if (filtered.length !== 0 && filtered !== undefined) {\r\n        return filtered\r\n      } else {\r\n        return []\r\n      }\r\n    } else {\r\n      return persons\r\n    }\r\n  }\r\n  const handleNumber = (e) => {\r\n    setnewNumber(e.target.value)\r\n  }\r\n  const handleName = (e) => {\r\n    setnewName(e.target.value)\r\n  }\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    const isPresent = persons.find((person) => person.name === newName)\r\n    if (isPresent) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already added to phonebook, replace the old number with the new one?`\r\n        )\r\n      ) {\r\n        const updatedObject = { ...isPresent, number: newNumber }\r\n\r\n        phoneBookService\r\n          .update(isPresent.id, updatedObject)\r\n          .then((newNumberObject) => {\r\n            setPersons(\r\n              persons.map((person) =>\r\n                person.id !== newNumberObject.id ? person : newNumberObject\r\n              )\r\n            )\r\n            setMessage(\r\n              `New number of ${updatedObject.name} is ${updatedObject.number}`\r\n            )\r\n            setnewName('')\r\n            setnewNumber('')\r\n            setTimeout(() => setMessage(null), 3000)\r\n          })\r\n          .catch(() => {\r\n            setChangeClass('fail')\r\n            setMessage(\r\n              `Information of ${updatedObject.name} has already been removed from the server`\r\n            )\r\n            phoneBookService\r\n              .getAll()\r\n              .then((currentData) => setPersons(currentData))\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n              setChangeClass('success')\r\n            }, 3000)\r\n          })\r\n      }\r\n    } else {\r\n      const newPerson = {\r\n        name: newName,\r\n        number: newNumber,\r\n        date: new Date(),\r\n      }\r\n      phoneBookService\r\n        .create(newPerson)\r\n        .then((currentPerson) => {\r\n          setPersons(persons.concat(currentPerson))\r\n          setMessage(`Added ${currentPerson.name}`)\r\n          setnewName('')\r\n          setnewNumber('')\r\n          setTimeout(() => setMessage(null), 3000)\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.response.data)\r\n          setChangeClass('fail')\r\n          setMessage(error.response.data.error)\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n            setChangeClass('success')\r\n          }, 3000)\r\n        })\r\n    }\r\n  }\r\n  const handleDelete = (id, name) => {\r\n    if (window.confirm(`Delete ${name}?`)) {\r\n      phoneBookService.deletePerson(id).then(() => {\r\n        phoneBookService.getAll().then((newPersons) => setPersons(newPersons))\r\n        setChangeClass('delete')\r\n        setMessage(`Deleted ${name}`)\r\n        setnewName('')\r\n        setnewNumber('')\r\n        setTimeout(() => setMessage(null), 3000)\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <ErrorMessage message={message} changeClass={changeClass} />\r\n      <Filter filter={filter} handleFilter={handleFilter} />\r\n      <h3>add a new</h3>\r\n      <PersonForm\r\n        addName={addName}\r\n        newName={newName}\r\n        handleName={handleName}\r\n        newNumber={newNumber}\r\n        handleNumber={handleNumber}\r\n      />\r\n      <h3>Numbers</h3>\r\n      {newFilteredPerson().map((person) => (\r\n        <Persons\r\n          showPerson={person}\r\n          key={person.name}\r\n          handleDelete={() => handleDelete(person.id, person.name)}\r\n        />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}